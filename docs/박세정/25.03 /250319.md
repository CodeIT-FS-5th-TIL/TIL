
# ğŸ“š ì£¼ì œ: ìœ ì € ê¸°ëŠ¥ êµ¬í˜„


ë‚ ì§œ: 2025-03-19



ì§€ë‚œ ê¸€ì—ì„œ ë‹¤ë£¨ê³  ì‹¶ì—ˆìœ¼ë‚˜ ë„ˆë¬´ ì£¼ì œ ë²”ìœ„ê°€ ë„“ì–´ì§€ê³ , ë‚´ìš©ì´ ê¸¸ì–´ì§ˆ ê²ƒ ê°™ì•„ ë‹¤ë£¨ì§€ ëª»í–ˆë˜ â€˜ìœ ì € ê¸°ëŠ¥ êµ¬í˜„â€™ì— ëŒ€í•´ ì˜¤ëŠ˜ ê³µë¶€í•´ë³´ê³ ì í•©ë‹ˆë‹¤.


# ğŸ’¡ìœ ì € ê¸°ëŠ¥ êµ¬í˜„


ìµœê·¼ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì“°ë‹¤ë³´ë©´ ê°€ì…, ë¡œê·¸ì¸, ë§ˆì´ í˜ì´ì§€ë¡œ ë“¤ì–´ê°€ëŠ” ê²ƒê³¼ ê°™ì´ ìœ ì € ê¸°ëŠ¥ì€ í•„ìˆ˜ë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤.  ìœ ì € ê¸°ëŠ¥ì€ ë³´í†µ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì‘ì—…ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤.

- íšŒì›ê°€ì…
- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
- ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
- í”„ë¡œí•„ ì¡°íšŒ(ë§ˆì´í˜ì´ì§€)
- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- íšŒì› íƒˆí‡´

## ìœ ì € ì„œë¹„ìŠ¤ì™€ ëª¨ë“ˆ íŒŒì¼ êµ¬ì„±


íšŒì›ê°€ì…, ë¡œê·¸ì¸ ë“±ì˜ ì‘ì—…ì„ êµ¬í˜„í•˜ê¸°ì— ì•ì„œ ìœ ì € ì„œë¹„ìŠ¤ì˜ ê¸°ëŠ¥ ì •ì˜ì™€ ëª¨ë“ˆíŒŒì¼ì„ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.


### ìœ ì € ê¸°ëŠ¥ ì •ì˜


ìœ ì € ì„œë¹„ìŠ¤ê°€ ê°€ì ¸ì•¼ í•  ê¸°ëŠ¥ì„ ë‹¤ìŒ í‘œì™€ ê°™ì´ ì˜ˆì‹œë¥¼ ë“¤ì–´ ì •ì˜í•˜ê² ìŠµë‹ˆë‹¤.


| **ë©”ì†Œë“œëª…**     | **ê¸°ëŠ¥ëª…**          | **ì˜ˆì‹œ ì„¤ëª…**                                                                                                         |
| ------------ | ---------------- | ----------------------------------------------------------------------------------------------------------------- |
| createUser   | ìƒˆë¡œìš´ ìœ ì € ìƒì„±        | ì‚¬ìš©ìë¡œë¶€í„° ìƒˆë¡œìš´ ìœ ì €ì˜ ì •ë³´ë¥¼ ì…ë ¥ë°›ì•„ ìœ ì €ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ìƒì„±í•˜ëŠ” ìœ ì €ëŠ” ë‹¤ë¥¸ ìœ ì €ì™€ êµ¬ë¶„ë  ìˆ˜ ìˆì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, íŠ¹ì • ê³ ìœ  ì •ë³´ê°€ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤.                          |
| findAllUsers | ìƒì„±ëœ ëª¨ë“  ìœ ì €ë¥¼ ì¡°íšŒ    | í˜„ì¬ ì¡´ì¬í•˜ëŠ” ëª¨ë“  ìœ ì €ë“¤ì˜ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ë‹¨, ìš”ì²­ ì‹œ ë°˜í™˜í•  ìˆ˜ ìˆëŠ” ìœ ì € ì •ë³´ë¥¼ êµ¬ë¶„í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.                                                  |
| findUserBy   | ì¡°ê±´ì— ë”°ë¥¸ í•˜ë‚˜ì˜ ìœ ì € ì¡°íšŒ | ì¡°ê±´ì— ë”°ë¼ ìœ ì € í•œ ëª…ì˜ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ìœ ì € í•œ ëª…ì„ ê²€ìƒ‰í•˜ê¸° ìœ„í•´ì„œëŠ” ê·¸ í•œ ëª…ì„ íŠ¹ì •ì§€ì„ ìˆ˜ ìˆì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, ì¡°ê±´ì—ëŠ” íŠ¹ì • ê³ ìœ  ì •ë³´ê°€ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.                   |
| updateUser   | ìœ ì €ì˜ ì •ë³´ ë³€ê²½        | ìœ ì € í•œ ëª…ì˜ ì •ë³´ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤. ìœ ì €ì˜ ì •ë³´ë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œëŠ” ì•ì„  ìœ ì € ì¡°íšŒì™€ ê°™ì´ í•˜ë‚˜ì˜ ìœ ì €ë¥¼ íŠ¹ì •ì§€ì„ ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ íŠ¹ì • ê³ ìœ  ì •ë³´ì™€ ë³€ê²½í•  ìƒˆë¡œìš´ ì •ë³´ê°€ ê°™ì´ ì „ë‹¬ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. |
| deleteUser   | ìœ ì € ì‚­ì œ            | ìœ ì €ì˜ ì •ë³´ë¥¼ ë³€ê²½í•˜ëŠ” ê¸°ëŠ¥ê³¼ ê°™ì´, íŠ¹ì • ê³ ìœ  ì •ë³´ë¥¼ í†µí•´ í•˜ë‚˜ì˜ ìœ ì €ë¥¼ íŠ¹ì •ì§€ìœ¼ë©´, í•´ë‹¹ ìœ ì €ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.                                                    |


### ëª¨ë¸ ë°ì´í„° ì •ì˜


| **ë°ì´í„° ì»¬ëŸ¼**        | **í•­ëª©**        |
| ----------------- | ------------- |
| id                | ìœ ì €ì˜ ì•„ì´ë””       |
| email             | ìœ ì €ì˜ ì´ë©”ì¼       |
| nickname          | ìœ ì €ì˜ ë‹‰ë„¤ì„       |
| image             | ìœ ì €ì˜ í”„ë¡œí•„ ì´ë¯¸ì§€   |
| encryptedPassword | ìœ ì €ì˜ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ |
| createdAt         | ìœ ì € ê°€ì…ì¼        |
| updatedAt         | ìœ ì € ì •ë³´ ì—…ë°ì´íŠ¸ì¼   |


```javascript
model User {
  id                Int      @id @default(autoincrement())
  email             String   @unique
  nickname          String
  image             String
  encryptedPassword String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  }
```


## ğŸ”íšŒì›ê°€ì…


íšŒì›ê°€ì…ì€ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ë°›ì•„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.


### ì£¼ìš” ê³¼ì •

1. í´ë¼ì´ì–¸íŠ¸ì—ì„œ `username`, `email`, `password` ë“±ì„ ì…ë ¥ë°›ìŒ
2. ì…ë ¥ê°’ ê²€ì¦(ì´ë©”ì¼ í˜•ì‹, ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´ ë“±)
3. ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¤‘ë³µëœ ì´ë©”ì¼ ìˆëŠ”ì§€ í™•ì¸
4. ë¹„ë°€ë²ˆí˜¸ë¥¼ `bcrypt`ë¡œ í•´ì‹±í•˜ì—¬ ì €ì¥
5. íšŒì› ì •ë³´ ì €ì¥ í›„ ì„±ê³µ ì‘ë‹µ ë°˜í™˜

### ë°±ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(Express + Prisma)


```javascript
import { PrismaClient } from "@prisma/client";
import bcrypt from "bcrypt";

const prisma = new PrismaClient();

export const signUp = async (req, res) => {
  const { username, email, password } = req.body;

  try {
    // ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸
    const existingUser = await prisma.user.findUnique({ where: { email } });
    if (existingUser) return res.status(400).json({ message: "ì´ë¯¸ ê°€ì…ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤." });

    // ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
    const hashedPassword = await bcrypt.hash(password, 10);

    // ìœ ì € ì €ì¥
    const newUser = await prisma.user.create({
      data: { username, email, password: hashedPassword },
    });

    res.status(201).json({ message: "íšŒì›ê°€ì… ì„±ê³µ", userId: newUser.id });
  } catch (error) {
    res.status(500).json({ message: "íšŒì›ê°€ì… ì‹¤íŒ¨", error });
  }
};
```


### í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(React + Next.js)


```javascript
import { useState } from "react";

export default function SignUp() {
  const [form, setForm] = useState({ username: "", email: "", password: "" });
  const [message, setMessage] = useState("");

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setForm({ ...form, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    const res = await fetch("/api/auth/signup", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(form),
    });

    const data = await res.json();
    setMessage(data.message);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input type="text" name="username" placeholder="Username" onChange={handleChange} required />
      <input type="email" name="email" placeholder="Email" onChange={handleChange} required />
      <input type="password" name="password" placeholder="Password" onChange={handleChange} required />
      <button type="submit">íšŒì›ê°€ì…</button>
      <p>{message}</p>
    </form>
  );
}
```


## ğŸ”ë¡œê·¸ì¸


ë¡œê·¸ì¸ì€ ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê²€ì¦í•˜ê³ , ì„±ê³µí•˜ë©´ JWT í† í°ì„ ë°œê¸‰í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.


### ì£¼ìš” ê³¼ì •

1. `email`, `password` ë“±ì„ ì…ë ¥ë°›ìŒ
2. ì´ë©”ì¼ì´ ë°ì´í„° ë² ì´ìŠ¤ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
3. ë¹„ë°€ë²ˆí˜¸ ë¹„êµ(`bcrypt.compare()`)
4. ë¡œê·¸ì¸ ì„±ê³µ ì‹œ JWTí† í° ë°œê¸‰

### ë°±ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(Express + Prisma)


```javascript
import jwt from "jsonwebtoken";

export const login = async (req, res) => {
  const { email, password } = req.body;

  try {
    // ì´ë©”ì¼ í™•ì¸
    const user = await prisma.user.findUnique({ where: { email } });
    if (!user) return res.status(400).json({ message: "ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤." });

    // ë¹„ë°€ë²ˆí˜¸ í™•ì¸
    const isValidPassword = await bcrypt.compare(password, user.password);
    if (!isValidPassword) return res.status(400).json({ message: "ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤." });

    // JWT í† í° ë°œê¸‰
    const token = jwt.sign({ userId: user.id }, process.env.JWT_SECRET, { expiresIn: "1h" });

    res.status(200).json({ message: "ë¡œê·¸ì¸ ì„±ê³µ", token });
  } catch (error) {
    res.status(500).json({ message: "ë¡œê·¸ì¸ ì‹¤íŒ¨", error });
  }
};
```


### í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(React + Next.js)


```javascript
import { useState } from "react";
import { useRouter } from "next/router";

export default function Login() {
  const [form, setForm] = useState({ email: "", password: "" });
  const [error, setError] = useState("");
  const router = useRouter();

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setForm({ ...form, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    const res = await fetch("/api/auth/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(form),
    });

    const data = await res.json();
    if (res.ok) {
      localStorage.setItem("token", data.token); // JWT ì €ì¥
      router.push("/profile"); // ë¡œê·¸ì¸ í›„ í”„ë¡œí•„ í˜ì´ì§€ë¡œ ì´ë™
    } else {
      setError(data.message);
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <input type="email" name="email" placeholder="Email" onChange={handleChange} required />
      <input type="password" name="password" placeholder="Password" onChange={handleChange} required />
      <button type="submit">ë¡œê·¸ì¸</button>
      {error && <p>{error}</p>}
    </form>
  );
}
```


## ğŸ”ë¡œê·¸ì•„ì›ƒ


JWTë¥¼ ì‚¬ìš©í•œ ê²½ìš°, ë°±ì—”ë“œì—ì„œ ì§ì ‘ í† í°ì„ ë¬´íš¨í™”í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤.


### ì£¼ìš” ê³¼ì •

1. í´ë¼ì´ì–¸íŠ¸ê°€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ / ì¿ í‚¤ì—ì„œ í† í° ì‚­ì œ

### í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(React + Next.js)


```javascript
import { useRouter } from "next/router";

export default function Logout() {
  const router = useRouter();

  const handleLogout = () => {
    localStorage.removeItem("token"); // JWT ì‚­ì œ
    router.push("/login");
  };

  return <button onClick={handleLogout}>ë¡œê·¸ì•„ì›ƒ</button>;
}
```


## ğŸ”ì¸ì¦ ë¯¸ë“¤ì›¨ì–´


ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ íŠ¹ì • APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ JWTë¥¼ ê²€ì¦í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.


### ì£¼ìš” ê³¼ì •

1. ìš”ì²­ í—¤ë”ì—ì„œ `Authorization` í† í°ì„ ê°€ì ¸ì˜´
2. í† í°ì„ ê²€ì¦í•˜ê³ , ìœ ì € ì •ë³´ë¥¼ ìš”ì²­ ê°ì²´ì— ì¶”ê°€
3. ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ `401 Unauthorized` ì‘ë‹µ

### ë°±ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(Express + Prisma)


```javascript
import jwt from "jsonwebtoken";

export const authenticateUser = (req, res, next) => {
  const token = req.headers.authorization?.split(" ")[1]; // "Bearer TOKEN_VALUE"
  if (!token) return res.status(401).json({ message: "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤." });

  try {
    const decoded = jwt.verify(token, "YOUR_SECRET_KEY");
    req.user = decoded; // ìš”ì²­ ê°ì²´ì— ìœ ì € ì •ë³´ ì €ì¥
    next();
  } catch (error) {
    res.status(401).json({ message: "ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤." });
  }
};
```


### í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(React + Next.js)


```javascript
import { createContext, useContext, useEffect, useState } from "react";

const AuthContext = createContext(null);

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);

  useEffect(() => {
    const token = localStorage.getItem("token");
    if (token) {
      fetch("/api/auth/me", {
        headers: { Authorization: `Bearer ${token}` },
      })
        .then((res) => res.json())
        .then((data) => setUser(data))
        .catch(() => localStorage.removeItem("token"));
    }
  }, []);

  return <AuthContext.Provider value={{ user, setUser }}>{children}</AuthContext.Provider>;
};

export const useAuth = () => useContext(AuthContext);
```


## ğŸ”í”„ë¡œí•„ ì¡°íšŒ(ë§ˆì´í˜ì´ì§€)


ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” APIì…ë‹ˆë‹¤.


### ì£¼ìš” ê³¼ì •

1. `authenticateUser` ë¯¸ë“¤ì›¨ì–´ë¥¼ ê±°ì³ ì‚¬ìš©ì ì¸ì¦
2. ë¡œê·¸ì¸í•œ ìœ ì €ì˜ `id`ë¥¼ ì´ìš©í•´ DBì—ì„œ ì •ë³´ ì¡°íšŒ
3. í”„ë¡œí•„ ì •ë³´ ì‘ë‹µ(ë¹„ë°€ë²ˆí˜¸ ì œì™¸)

### ë°±ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(Express + Prisma)


```javascript
export const getUserProfile = async (req, res) => {
  try {
    const user = await prisma.user.findUnique({
      where: { id: req.user.userId },
      select: { id: true, username: true, email: true }, // ë¹„ë°€ë²ˆí˜¸ ì œì™¸
    });

    if (!user) return res.status(404).json({ message: "ìœ ì €ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤." });

    res.status(200).json(user);
  } catch (error) {
    res.status(500).json({ message: "ìœ ì € ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨", error });
  }
};
```


### í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(React + Next.js)


```javascript
import { useAuth } from "../context/AuthProvider";

export default function Profile() {
  const { user } = useAuth();

  if (!user) return <p>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>;

  return (
    <div>
      <h1>í”„ë¡œí•„</h1>
      <p>ì´ë¦„: {user.username}</p>
      <p>ì´ë©”ì¼: {user.email}</p>
    </div>
  );
}
```


## ğŸ”ë¹„ë°€ë²ˆí˜¸ ë³€ê²½


ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹œ, ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•œ í›„ ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.


### ì£¼ìš” ê³¼ì •

1. currentPasswordì™€ newPasswordë¥¼ ì…ë ¥ë°›ìŒ
2. í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê²€ì¦(bcrypt.compare())
3. ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ í•´ì‹±í•˜ì—¬ ì €ì¥

### ë°±ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(Express + Prisma)


```javascript
export const changePassword = async (req, res) => {
  const { currentPassword, newPassword } = req.body;

  try {
    const user = await prisma.user.findUnique({ where: { id: req.user.userId } });
    if (!user) return res.status(404).json({ message: "ìœ ì €ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤." });

    // í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
    const isValid = await bcrypt.compare(currentPassword, user.password);
    if (!isValid) return res.status(400).json({ message: "í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." });

    // ìƒˆ ë¹„ë°€ë²ˆí˜¸ í•´ì‹± í›„ ì €ì¥
    const hashedNewPassword = await bcrypt.hash(newPassword, 10);
    await prisma.user.update({ where: { id: user.id }, data: { password: hashedNewPassword } });

    res.status(200).json({ message: "ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„±ê³µ" });
  } catch (error) {
    res.status(500).json({ message: "ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹¤íŒ¨", error });
  }
};
```


### í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(React + Next.js)


```javascript
import { useState } from "react";

export default function ChangePassword() {
  const [form, setForm] = useState({ currentPassword: "", newPassword: "" });
  const [message, setMessage] = useState("");

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setForm({ ...form, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    const token = localStorage.getItem("token");

    const res = await fetch("/api/auth/change-password", {
      method: "POST",
      headers: { "Content-Type": "application/json", Authorization: `Bearer ${token}` },
      body: JSON.stringify(form),
    });

    const data = await res.json();
    setMessage(data.message);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input type="password" name="currentPassword" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸" onChange={handleChange} required />
      <input type="password" name="newPassword" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸" onChange={handleChange} required />
      <button type="submit">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
      <p>{message}</p>
    </form>
  );
}
```


## ğŸ”íšŒì› íƒˆí‡´


íšŒì› íƒˆí‡´ ì‹œ, ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í•´ë‹¹ ìœ ì €ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.


### ì£¼ìš” ê³¼ì •

1. `authenticateUser` ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•´ ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸
2. `userId`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìœ ì € ì‚­ì œ

### ë°±ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(Express + Prisma)


```javascript
export const deleteUser = async (req, res) => {
  try {
    await prisma.user.delete({ where: { id: req.user.userId } });
    res.status(200).json({ message: "íšŒì› íƒˆí‡´ ì„±ê³µ" });
  } catch (error) {
    res.status(500).json({ message: "íšŒì› íƒˆí‡´ ì‹¤íŒ¨", error });
  }
};
```


### í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ì˜ˆì‹œ(React + Next.js)


```javascript
import { useRouter } from "next/router";

export default function DeleteAccount() {
  const router = useRouter();

  const handleDelete = async () => {
    const token = localStorage.getItem("token");

    const res = await fetch("/api/auth/delete", {
      method: "DELETE",
      headers: { Authorization: `Bearer ${token}` },
    });

    if (res.ok) {
      localStorage.removeItem("token");
      router.push("/");
    } else {
      alert("íšŒì› íƒˆí‡´ ì‹¤íŒ¨");
    }
  };

  return <button onClick={handleDelete}>íšŒì› íƒˆí‡´</button>;
}
```


## ìœ ì € ê¸°ëŠ¥ í™•ì¥

- ì´ë©”ì¼ ì¸ì¦: ê°€ì… ì‹œ ì´ë©”ì¼ ì¸ì¦ì„ ìš”êµ¬í•  ìˆ˜ë„ ìˆìŒ
- ì†Œì…œ ë¡œê·¸ì¸: Google, Github ë“± ë¡œê·¸ì¸ ì¶”ê°€ ê°€ëŠ¥
- ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°: ì´ë©”ì¼ì„ í†µí•œ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ê¸°ëŠ¥ êµ¬í˜„

# ğŸ“ˆ ë‹¤ìŒ í•™ìŠµ ê³„íš(TIL ì£¼ì œ)

- [x] ìœ ì € ê¸°ëŠ¥ êµ¬í˜„ ë°©ë²•
- [ ] Zustand ì‚¬ìš©ë²•
- [ ] OAuth ì‚¬ìš©ë²•
- [ ] ë°±ì—”ë“œ ê¸°ìˆ ìŠ¤íƒ ì •í•˜ê¸°
- [ ] ì„œë²„ì‚¬ì´ë“œë Œë”ë§

# ğŸ”— ì°¸ê³  ìë£Œ

- [ë¸”ë¡œê·¸ - [ì´ˆë³´ìì˜ ëˆˆìœ¼ë¡œ ë³´ëŠ” NestJS] 5. ìœ ì € ì„œë¹„ìŠ¤ì˜ êµ¬í˜„](https://ts01.tistory.com/23)
- [ë¸”ë¡œê·¸ - NestJS_ì˜¨ë¼ì¸ ê³µì—° ì˜ˆë§¤ ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ 3í¸_ìœ ì €ê¸°ëŠ¥ êµ¬í˜„(íšŒì›ê°€ì… ë° ë¡œê·¸ì¸[ä¸Š]),[ä¸‹]](https://k0zdevel.tistory.com/114)
