"use strict";(self.webpackChunkcode_it_fs_5th_til=self.webpackChunkcode_it_fs_5th_til||[]).push([[666],{8453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>i});var t=n(6540);const c={},s=t.createContext(c);function o(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),t.createElement(s.Provider,{value:r},e.children)}},9974:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>u,contentTitle:()=>i,default:()=>a,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"\ucd5c\uc740\ube44/25.02/250226","title":"250226","description":"prisma migrate\uc2dc enum \ud0c0\uc785\uc124\uc815\uc73c\ub85c \uc778\ud55c \uc624\ub958","source":"@site/docs/\ucd5c\uc740\ube44/25.02/250226.mdx","sourceDirName":"\ucd5c\uc740\ube44/25.02","slug":"/\ucd5c\uc740\ube44/25.02/250226","permalink":"/TIL/docs/\ucd5c\uc740\ube44/25.02/250226","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\ucd5c\uc740\ube44/25.02/250226.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"TILSidebar","previous":{"title":"NEXT Hydration \ub108 \ubb54\ub370?","permalink":"/TIL/docs/\ucd5c\uc740\ube44/25.02/250225"}}');var c=n(4848),s=n(8453);const o={},i=void 0,u={},d=[{value:"prisma migrate\uc2dc enum \ud0c0\uc785\uc124\uc815\uc73c\ub85c \uc778\ud55c \uc624\ub958",id:"prisma-migrate\uc2dc-enum-\ud0c0\uc785\uc124\uc815\uc73c\ub85c-\uc778\ud55c-\uc624\ub958",level:2},{value:"\uc5d0\ub7ec \uba54\uc2dc\uc9c0",id:"\uc5d0\ub7ec-\uba54\uc2dc\uc9c0",level:3},{value:"\ubb38\uc81c \uc6d0\uc778",id:"\ubb38\uc81c-\uc6d0\uc778",level:3},{value:"\uadf8\ub7f0\ub370, \uc218\uc815 \ud6c4\uc5d0\ub3c4 \ucf58\uc194\uc744 \ucc0d\uc5b4\ubcf4\ub2c8 \uc5ec\uc804\ud788 \uc18c\ubb38\uc790..!",id:"\uadf8\ub7f0\ub370-\uc218\uc815-\ud6c4\uc5d0\ub3c4-\ucf58\uc194\uc744-\ucc0d\uc5b4\ubcf4\ub2c8-\uc5ec\uc804\ud788-\uc18c\ubb38\uc790",level:2},{value:"\ud83d\udd75\ud83c\udffb\u200d\u2642\ufe0f url \uacbd\ub85c\uc5d0\uc11c resourceType \uac12\uc744 \ucd94\ucd9c\ud558\ub294 extractResource(req) \ud568\uc218",id:"\ufe0f-url-\uacbd\ub85c\uc5d0\uc11c-resourcetype-\uac12\uc744-\ucd94\ucd9c\ud558\ub294-extractresourcereq-\ud568\uc218",level:2},{value:"fetchCommentList \ud568\uc218 \ucf58\uc194\ub85c\uadf8 \ud655\uc778",id:"fetchcommentlist-\ud568\uc218-\ucf58\uc194\ub85c\uadf8-\ud655\uc778",level:3}];function l(e){const r={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.h2,{id:"prisma-migrate\uc2dc-enum-\ud0c0\uc785\uc124\uc815\uc73c\ub85c-\uc778\ud55c-\uc624\ub958",children:"prisma migrate\uc2dc enum \ud0c0\uc785\uc124\uc815\uc73c\ub85c \uc778\ud55c \uc624\ub958"}),"\n",(0,c.jsx)(r.h3,{id:"\uc5d0\ub7ec-\uba54\uc2dc\uc9c0",children:"\uc5d0\ub7ec \uba54\uc2dc\uc9c0"}),"\n",(0,c.jsxs)(r.p,{children:['"Invalid value for argument ',(0,c.jsx)(r.code,{children:"resourceType"}),'. Expected ResourceType."']}),"\n",(0,c.jsx)(r.h3,{id:"\ubb38\uc81c-\uc6d0\uc778",children:"\ubb38\uc81c \uc6d0\uc778"}),"\n",(0,c.jsx)(r.p,{children:"\ub313\uae00(comment) \uc2a4\ud0a4\ub9c8\uc5d0 resourceType \ud544\ub4dc\ub97c \ub9cc\ub4e4\uc5b4\uc11c \ud0c0\uc785\uc744 ResourceType(enum) \uc73c\ub85c \uc8fc\uace0 \uac8c\uc2dc\uae00(Article), \uc0c1\ud488(Product)\ub458 \uc911\uc5d0 \ud558\ub098\uc778 enum \ud0c0\uc785\uc73c\ub85c \uc9c0\uc815\ud574\uc8fc\uc5c8\ub294\ub370,\neunm \ud0c0\uc785\uc744 \ub300\ubb38\uc790\ub85c \uc9c0\uc815\ud574\uc8fc\uc9c0\uc54a\uc544\uc11c \ubc1c\uc0dd\ud55c \uc5d0\ub7ec\uc600\ub2e4."}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsx)(r.li,{children:"\ucc98\uc74c\uc5d0 \uc791\uc131\ud588\ub358 \uc2a4\ud0a4\ub9c8"}),"\n"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"model Comment {\n  id           String        @id @default(uuid())\n  resourceType ResourceType?\n  resourceId   String\n  content      String\n  createdAt    DateTime      @default(now())\n  updatedAt    DateTime      @updatedAt\n}\n\nenum ResourceType {\n  Product\n  Article\n}\n"})}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsx)(r.li,{children:"\uc218\uc815 \ud6c4"}),"\n"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"model Comment {\n  id           String        @id @default(uuid())\n  resourceType ResourceType?\n  resourceId   String\n  content      String\n  createdAt    DateTime      @default(now())\n  updatedAt    DateTime      @updatedAt\n}\n\nenum ResourceType {\n  PRODUCT\n  ARTICLE\n}\n"})}),"\n",(0,c.jsx)(r.h2,{id:"\uadf8\ub7f0\ub370-\uc218\uc815-\ud6c4\uc5d0\ub3c4-\ucf58\uc194\uc744-\ucc0d\uc5b4\ubcf4\ub2c8-\uc5ec\uc804\ud788-\uc18c\ubb38\uc790",children:"\uadf8\ub7f0\ub370, \uc218\uc815 \ud6c4\uc5d0\ub3c4 \ucf58\uc194\uc744 \ucc0d\uc5b4\ubcf4\ub2c8 \uc5ec\uc804\ud788 \uc18c\ubb38\uc790..!"}),"\n",(0,c.jsx)(r.p,{children:"'resourceType: product' \ub85c \ucc0d\ud788\ub294 \uac83\uc774\uc5c8\ub2e4. \uc2ec\uc9c0\uc5b4 \uc81c\uc77c \uccab\uae00\uc790\ub3c4 \uc18c\ubb38\uc790\ub85c \ubc14\ub01c."}),"\n",(0,c.jsx)(r.p,{children:"\ubc94\uc778\uc740 \ubc14\ub85c"}),"\n",(0,c.jsx)(r.h2,{id:"\ufe0f-url-\uacbd\ub85c\uc5d0\uc11c-resourcetype-\uac12\uc744-\ucd94\ucd9c\ud558\ub294-extractresourcereq-\ud568\uc218",children:"\ud83d\udd75\ud83c\udffb\u200d\u2642\ufe0f url \uacbd\ub85c\uc5d0\uc11c resourceType \uac12\uc744 \ucd94\ucd9c\ud558\ub294 extractResource(req) \ud568\uc218"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-js",children:'const extractResource = (req) => {\n  const path = req.baseUrl; // \uc608: "/api/products" \ub610\ub294 "/api/articles"\n  let resourceType;\n  let resourceId;\n\n  if (path.includes("/products")) {\n    resourceType = "product";\n    resourceId = req.params.id;\n  } else if (path.includes("/articles")) {\n    resourceType = "article";\n    resourceId = req.params.id;\n  } else {\n    throw new Error("Invalid resource type");\n  }\n\n  return { resourceType, resourceId };\n};\n'})}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsx)(r.li,{children:'req(\uc694\uccad \uac1d\uccb4)\ub97c \ubc1b\uc544\uc11c resourceType(\ub9ac\uc18c\uc2a4 \uc885\ub958)\uacfc resourceId(\ub9ac\uc18c\uc2a4 ID)\ub97c \ucd94\ucd9c\ud558\ub294 \ud568\uc218\uc774\ub2e4.\nex) URL \uacbd\ub85c (path)\uc5d0 "/products"\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc73c\uba74: resourceType\uc744 "product"\ub85c \uc124\uc815\n\ubc14\ub85c \uc5ec\uae30\uc5d0 resourceType\uc744 \ub531 \uc18c\ubb38\uc790\ub85c \uc124\uc815\ud558\ub77c\uace0 \uc9c0\uc815\ud574\ub193\uc558\ub358 \uac83\uc774 \ubb38\uc81c\uac00 \ub41c\uac83\uc774\ub2e4.'}),"\n"]}),"\n",(0,c.jsx)(r.p,{children:"\uc774 \ud568\uc218\uc5d0\uc11c\ub3c4 product\uc640 article\uc744 \ubaa8\ub450 \ub300\ubb38\uc790\ub85c \ubcc0\uacbd\ud574\uc8fc\uc5c8\ub2e4.\n\uc774\ud6c4 \ub313\uae00 \ubaa9\ub85d \ubd88\ub7ec\uc624\ub294 \uc11c\ube44\uc2a4 \ud568\uc218\uc5d0 \ucf58\uc194 \ucc0d\uc5b4\ubcf4\ub2c8 \uc798 \ubcc0\uacbd\ub418\uc5b4 \uc5d0\ub7ec \ud574\uacb0\ub41c \uac83 \ud655\uc778 ~!"}),"\n",(0,c.jsx)(r.h3,{id:"fetchcommentlist-\ud568\uc218-\ucf58\uc194\ub85c\uadf8-\ud655\uc778",children:"fetchCommentList \ud568\uc218 \ucf58\uc194\ub85c\uadf8 \ud655\uc778"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:'const fetchCommentList = async (cursor, limit, resourceType, resourceId) => {\n  console.log("\ud83d\udd0d resourceType :", resourceType); //resourceType \ud655\uc778\n  const prismaResourceType = resourceType;\n\n  const take = parseInt(limit) || 10; // \ud55c \ubc88\uc5d0 \uac00\uc838\uc62c \ub370\uc774\ud130 \uac1c\uc218\n  const cursorOptions = cursor\n    ? { skip: 1, cursor: { id: cursor } } // \uc774\uc804 \ub370\uc774\ud130\ub97c \uac74\ub108\ub701\ub2c8\ub2e4.\n    : {};\n\n  return await prisma.comment.findMany({\n    ...cursorOptions,\n    take,\n    where: {\n      resourceType: prismaResourceType,\n      resourceId,\n    },\n    orderBy: { createdAt: "asc" },\n  });\n};\n'})}),"\n",(0,c.jsx)(r.p,{children:'"\ud83d\udd0d resourceType : PRODUCT"'})]})}function a(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}}}]);