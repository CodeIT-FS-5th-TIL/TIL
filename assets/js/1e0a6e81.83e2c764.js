"use strict";(self.webpackChunkcode_it_fs_5th_til=self.webpackChunkcode_it_fs_5th_til||[]).push([[1142],{1777:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"\uae40\uc2b9\uc6b0/25.03/250317","title":"250317","description":"\ubc30\uc6b4 \ub0b4\uc6a9","source":"@site/docs/\uae40\uc2b9\uc6b0/25.03/250317.md","sourceDirName":"\uae40\uc2b9\uc6b0/25.03","slug":"/\uae40\uc2b9\uc6b0/25.03/250317","permalink":"/TIL/docs/\uae40\uc2b9\uc6b0/25.03/250317","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\uae40\uc2b9\uc6b0/25.03/250317.md","tags":[],"version":"current","frontMatter":{},"sidebar":"TILSidebar","previous":{"title":"250314","permalink":"/TIL/docs/\uae40\uc2b9\uc6b0/25.03/250314"},"next":{"title":"250318","permalink":"/TIL/docs/\uae40\uc2b9\uc6b0/25.03/250318"}}');var t=r(4848),i=r(8453);const o={},a=void 0,c={},d=[{value:"\ubc30\uc6b4 \ub0b4\uc6a9",id:"\ubc30\uc6b4-\ub0b4\uc6a9",level:2},{value:"\uc554\ud638\ud654\uc640 \ud574\uc2f1",id:"\uc554\ud638\ud654\uc640-\ud574\uc2f1",level:3},{value:"bcrypt\ub97c \uc0ac\uc6a9\ud574\uc11c \ube44\ubc00\ubc88\ud638 \uc800\uc7a5\ud558\uae30",id:"bcrypt\ub97c-\uc0ac\uc6a9\ud574\uc11c-\ube44\ubc00\ubc88\ud638-\uc800\uc7a5\ud558\uae30",level:3},{value:"JWT \ud1a0\ud070 \uae30\ubc18 \ub85c\uadf8\uc778 \ud50c\ub85c\uc6b0",id:"jwt-\ud1a0\ud070-\uae30\ubc18-\ub85c\uadf8\uc778-\ud50c\ub85c\uc6b0",level:3}];function l(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"\ubc30\uc6b4-\ub0b4\uc6a9",children:"\ubc30\uc6b4 \ub0b4\uc6a9"}),"\n",(0,t.jsx)(n.h3,{id:"\uc554\ud638\ud654\uc640-\ud574\uc2f1",children:"\uc554\ud638\ud654\uc640 \ud574\uc2f1"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\uc554\ud638\ud654\ub294 \uc591\ubc29\ud5a5 - \uc6d0\ubcf8 \ub370\uc774\ud130\ub97c \ub2e4\uc2dc \uc6d0\uc0c1 \ubcf5\uad6c\ud560 \uc218 \uc788\uc74c."}),"\n",(0,t.jsx)(n.li,{children:"\ud574\uc2f1\uc740 \ub2e8\ubc29\ud5a5 - \uc6d0\ubcf8 \ub370\uc774\ud130\ub85c \ub3cc\ub9ac\uae30 \uc5b4\ub824\uc6c0."}),"\n",(0,t.jsxs)(n.li,{children:["\uc554\ud638\ud654 \uc54c\uace0\ub9ac\uc998\uc774 \ud138\ub9ac\uba74 \uc554\ud638\ud654\ub294 \ubcf5\uad6c\ud558\uae30 \uc27d\uae30 \ub54c\ubb38\uc5d0 ",(0,t.jsx)(n.strong,{children:"\ud574\uc2f1\uc744 \uc0ac\uc6a9."})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"bcrypt\ub97c-\uc0ac\uc6a9\ud574\uc11c-\ube44\ubc00\ubc88\ud638-\uc800\uc7a5\ud558\uae30",children:"bcrypt\ub97c \uc0ac\uc6a9\ud574\uc11c \ube44\ubc00\ubc88\ud638 \uc800\uc7a5\ud558\uae30"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\uc77c\ubc18\uc801\uc73c\ub85c \ube44\ubc00\ubc88\ud638\ub97c \ud3c9\ubb38\uc73c\ub85c DB\uc5d0 \uc800\uc7a5\ud558\uc9c0 \uc54a\uc74c."}),"\n",(0,t.jsx)(n.li,{children:"bcrypt \uac19\uc740 \uc554\ud638\ud654 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud574\uc11c \uc800\uc7a5\ud568."}),"\n",(0,t.jsx)(n.li,{children:"\uadf8\ub9ac\uace0 \uc81c\uacf5\ud558\ub294 \ud568\uc218\ub85c DB\uc5d0 \uc800\uc7a5\ub41c \ud574\uc2f1\ub41c \uac12\uac00 \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\ud55c \ud3c9\ubb38\uc758 \ud574\uc2f1 \uac12\uc744 \ube44\uad50\ud574\uc11c \ube44\ubc00\ubc88\ud638 \ud655\uc778 \uae30\ub2a5\uc744 \uad6c\ud604\ud568."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"import bcrypt from 'bcrypt';\n\nasync function hashingPassword(password) { // \ud568\uc218 \ucd94\uac00\n  return bcrypt.hash(password, 10);\n}\n\n// \uc720\uc800 \uc0dd\uc131\nasync function createUser(user) {\n  const existedUser = await userRepository.findByEmail(user.email);\n\n  if (existedUser) {\n    const error = new Error('User already exists');\n    error.code = 422;\n    error.data = { email: user.email };\n    throw error;\n  }\n\n  const hashedPassword = await hashingPassword(user.password); // \ud574\uc2f1 \uacfc\uc815 \ucd94\uac00\n  const createdUser = await userRepository.save({ ...user, password: hashedPassword }); // password \ucd94\uac00\n  return filterSensitiveUserData(createdUser);\n}\n\n// \uc720\uc800 \uc815\ubcf4 \ud655\uc778\ud558\uae30\nasync function getUser(email, password) {\n  const user = await userRepository.findByEmail(email);\n  if (!user) {\n    const error = new Error(\"\uc5c6\ub294 \uc0ac\uc6a9\uc790\");\n    error.code = 401;\n    throw error;\n  }\n  await verifyPassword(password, user.password);\n  return filterSensitiveUserData(user);\n}\n\nasync function verifyPassword(inputPassword, savedPassword) {\n  const isValid = await bcrypt.compare(inputPassword, savedPassword); // \ubcc0\uacbd\n  if (!isValid) {\n    const error = new Error('Unauthorized');\n    error.code = 401;\n    throw error;\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"jwt-\ud1a0\ud070-\uae30\ubc18-\ub85c\uadf8\uc778-\ud50c\ub85c\uc6b0",children:"JWT \ud1a0\ud070 \uae30\ubc18 \ub85c\uadf8\uc778 \ud50c\ub85c\uc6b0"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\ub85c\uadf8\uc778 API \uc694\uccad \u2192 jsonwebtoken\uc73c\ub85c accessToken \ubc1c\uae09"}),"\n",(0,t.jsxs)(n.li,{children:["accessToken\uc744 \ud574\ub354(Authorization)\uc5d0 \ub123\uc5b4\uc11c \uc694\uccad(\ub9ac\ubdf0 \uc0dd\uc131 api)","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"auth.verifyAccessToken"})," \ubbf8\ub4e4\uc6e8\uc5b4 \uc2e4\ud589 - express-jwt","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"token\uc774 \uc774\uc0c1\ud558\uba74 401 \uc5d0\ub7ec"}),"\n",(0,t.jsxs)(n.li,{children:["token\uc774 \uc815\uc0c1 \u2192 ",(0,t.jsx)(n.code,{children:"req.user"})," \uc5d0 \uc815\ubcf4\ub97c \uc800\uc7a5\ud568."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var s=r(6540);const t={},i=s.createContext(t);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);